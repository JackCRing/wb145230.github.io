<!DOCTYPE html>
<html>
<meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'">
    <head></head>
    <body>
        <script>
            function connectWebViewJavascriptBridge(callback) {
                if (window.WebViewJavascriptBridge) {
                    callback(WebViewJavascriptBridge)
                } else {
                    document.addEventListener('WebViewJavascriptBridgeReady',
                                              function() {
                                              callback(WebViewJavascriptBridge)
                                              },
                                              false)
                }
            }
        connectWebViewJavascriptBridge(function(bridge) {
                                        bridge.init(function(message, responseCallback) {
                                               message = JSON.parse(message);                           
                                               var element = document.getElementById(message.imageUrl)
                                               if (element.src.match("loading")) {
                                                    element.src = message.imagePaths
                                                    alert(message.imagePaths);
                                               }
                                        });

                                        bridge.callHandler('testObjcCallback', {'url': 'http://wb145230.github.io/index_test_1.png'}, function(response) {

                                        });  
                                    })
            </script>
        <br />
        <p>这个里面是是测试代码,里面有1个图片
        <br />
        <img src = "loading" id = "http://wb145230.github.io/index_test_1.png"/></p>
    </body>
</html>
